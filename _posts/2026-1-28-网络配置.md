---
title: 网络配置
date: 2026-1-28 +8000
categories: [linux]
tags: [网络配置]
---
> 对于ssh远程操作推荐使用 nmcli con down ens33; nmcli con up ens33 一行命令，这样不至于没有up操作没执行被锁在外面
{: .prompt-tip}
## Ubuntu24.04配置网络
> 对于netcfg.ymal 文件权限为600 所有者和组均为root(推荐)
{: .prompt-tip}
最小化安装`minimal server`，配置静态ip，忽略ipv6

网络配置文件`/etc/netplan/netcfg.yaml`{: .filepath}
```yaml
network:
  version: 2
  renderer: networkd
  ethernets:
    ens33: # 使用对应网卡名称
      dhcp4: no
      dhcp6: no
      accept-ra: no
      addresses:
        - 10.0.0.10/24
      routes:
        - to: default
          via: 10.0.0.2
      nameservers:
        addresses:
          - 10.0.0.2
```
{: file="/etc/netplan/netcfg.yaml"}
```bash
## 应用配置
netplan apply
```

## Rocky9.7配置网络
最小化安装`minimal server`，配置静态ip，忽略ipv6
### 使用nmcli配置ip
```bash
## ens160 换成对应的网卡名称
nmcli connection modify ens160 ipv4.method manual \
ipv4.addresses 10.0.0.11 \
ipv4.gateway 10.0.0.2 \
ipv4.dns 10.0.0.2 \
ipv6.method ignore \
autoconnect yes # 自动连接

## 重载配置重启网卡
nmcli connection reload
nmcli connection down ens160
nmcli connection up ens160
```
### 编辑nmconnection配置文件配置ip
> 对于ens160.nmconnection文件 权限为600 所有者和组均为root(必须)
{: .prompt-danger}
`/etc/NetworkManager/system-connections/ens160.nmconnection`{: .filepath}
```ini
[connection]
id=ens160
type=ethernet
interface-name=enss160

[ipv4]
method=manual
address1=10.0.0.11/24
gateway=10.0.0.2
dns=10.0.0.2;

[ipv6]
method=ignore
```
{: file="/etc/NetworkManager/system-connections/ens160.nmconnection"}

```bash
## 重载配置重启网卡
nmcli connection reload
nmcli connection down ens160
nmcli connection up ens160
```
## OpenEuler配置网络
### 使用nmcli配置ip
同上述Rocky9.7nmcli配置
### 编辑ifcfg配置文件配置ip
`/etc/sysconfig/network-scripts/ifcfg-ens33`{: .filepath}
```ini
TYPE=Ethernet
ONBOOT=yes
BOOTPROTO=none
IPADDR=10.0.0.13
PREFIX=24
GATEWAY=10.0.0.2
DNS1=10.0.0.2
IPV6INIT=no
IPV6_AUTOCONF=no
NM_CONTROLLED=yes
```
{: file="/etc/sysconfig/network-scripts/ifcfg-ens33"}
```bash
## 重载配置重启网卡
nmcli connection reload
nmcli connection down ens160
nmcli connection up ens160
```